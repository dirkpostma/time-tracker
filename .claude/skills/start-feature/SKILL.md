---
name: start-feature
description: Start a new feature with branch creation, requirements gathering, and planning. Use when user invokes /start-feature or asks to start a new feature.
---

# Start Feature Skill

When the user invokes `/start-feature [feature-name]` or asks to start a new feature, follow this workflow.

## Arguments

- `feature-name`: Short kebab-case name for the feature (e.g., `user-auth`, `export-csv`)

## Workflow

### Step 1: Get Feature Name

If no feature name provided, ask the user:
- "What's a short name for this feature? (kebab-case, e.g., `user-auth`)"

### Step 2: Create Feature Branch

```bash
git checkout main
git pull
git checkout -b <feature-name>
```

If branch already exists, ask user whether to:
- Switch to existing branch
- Create a new branch with different name

### Step 3: Gather Requirements

Use the **AskUserQuestion tool** to gather requirements via multiple-choice questionnaires when applicable. This provides a better UX than open-ended questions.

**Guidelines for questionnaires:**
- Group related questions (up to 4 per call)
- Provide 2-4 clear options per question with descriptions
- Use `multiSelect: true` when multiple options can apply
- Add "(Recommended)" to suggested options
- Users can always select "Other" to provide custom input

**Core Questions to ask:**
- What is the main goal/outcome of this feature?
- What is the expected input/output?
- How should errors be handled?

**Scope Questions:**
- Does this need CLI commands, or just core logic?
- Are there any UI/UX preferences?
- How does this interact with existing features?

**Edge Cases:**
- What edge cases should we handle?
- Are there performance requirements?
- Any security considerations?

**Example questionnaire call:**
```
AskUserQuestion({
  questions: [
    {
      question: "What is the main goal of this feature?",
      header: "Goal",
      options: [
        { label: "Option A (Recommended)", description: "Description of option A" },
        { label: "Option B", description: "Description of option B" }
      ],
      multiSelect: false
    }
  ]
})
```

Keep asking until requirements are clear. Don't assume - clarify. Use follow-up questionnaires or free-form questions as needed.

### Step 4: Create Feature Folder

Always create a feature folder in `plans/`:
```
plans/<feature-name>/
└── plan.md
```

Note: No date prefix during planning. Date is added when feature is completed and moved to `history/`.

This folder will also contain:
- `test-coverage.md` - generated by `/test-coverage`
- Additional planning docs if needed (e.g., `auth.md`, `testing.md`)

### Step 5: Write the Plan

The plan should include:

```markdown
# Feature: <Feature Name>

## Goal
[One sentence describing the outcome]

## Requirements
- [Requirement 1]
- [Requirement 2]
- ...

## Design Decisions
- [Decision 1 and rationale]
- [Decision 2 and rationale]

## Implementation Steps
1. [ ] Step 1 - [description]
2. [ ] Step 2 - [description]
...

## Files to Create/Modify
- `path/to/file.ts` - [what changes]

## Testing Strategy
- [How to test this feature]

## Verification Checklist
- [ ] All tests pass
- [ ] Feature works as expected
- [ ] Documentation updated (if needed)
- [ ] No regressions introduced
```

### Step 6: Get Approval

Present the plan to the user and ask:
- "Does this plan look good? Any changes needed?"

Wait for explicit approval before proceeding to implementation.

### Step 7: Commit the Plan

```bash
git add plans/
git commit -m "Plan: <feature-name>"
```

## Output

After completing the workflow:
1. User is on the feature branch
2. Feature folder exists: `plans/<feature-name>/plan.md`
3. Plan is committed
4. Ready to start implementation

## After Feature is Merged

When a feature is completed and merged to main, move it to history with a date prefix:
```bash
mv plans/<feature-name> history/YYMMDD-<feature-name>
git add plans/ history/
git commit -m "Move <feature-name> to history"
```

## Example Usage

```
User: /start-feature user-preferences
Assistant: I'll help you start the user-preferences feature...
[Follows workflow above]
```

## Notes

- Active plans go in `plans/<feature-name>/plan.md`
- Completed features move to `history/YYMMDD-<feature-name>/`
- Keep plans focused and <100 lines per file
- For large features, add additional docs in the same folder
- Always get user approval before implementation
- Reference `/specs/` for existing architecture decisions
