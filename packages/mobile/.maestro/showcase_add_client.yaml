appId: com.anonymous.mobile
---
- launchApp:
    clearKeychain: true

# Handle dev client launcher
- tapOn:
    text: "http://localhost:8081"
    optional: true

# Wait for app to load (login screen)
- extendedWaitUntil:
    visible: "Time Tracker"
    timeout: 30000

# Open showcase via button (only in dev mode)
- tapOn:
    id: "open-showcase-button"

# Wait for showcase screen
- extendedWaitUntil:
    visible:
      id: "showcase-screen"
    timeout: 5000

# Navigate to Forms > Add Client
- tapOn:
    id: "category-forms"

- tapOn:
    id: "story-add-client"

# Wait for the Add Client story to load
- extendedWaitUntil:
    visible:
      id: "add-client-story"
    timeout: 5000

# Verify initial state - form should be hidden
- assertVisible:
    id: "add-client-button"

# Tap to show add form
- tapOn:
    id: "add-client-button"

# Verify form appears
- extendedWaitUntil:
    visible:
      id: "add-client-form"
    timeout: 3000

- assertVisible:
    id: "new-client-name-input"
- assertVisible:
    id: "submit-new-client-button"

# Enter client name
- tapOn:
    id: "new-client-name-input"
- inputText: "Test New Client"

# Hide keyboard first
- hideKeyboard

# Tap submit button by tapping Add text
- tapOn:
    text: "Add"

# Wait for success alert and dismiss it
- extendedWaitUntil:
    visible: "Success"
    timeout: 5000

- tapOn:
    text: "OK"

# Verify client was added - should show in selected display
- extendedWaitUntil:
    visible: "Test New Client"
    timeout: 3000

# Success!
- assertVisible:
    text: "Test New Client"
