appId: com.anonymous.mobile
---
- launchApp:
    clearKeychain: true

# Handle dev client launcher - tap the dev server URL
- tapOn:
    text: "http://localhost:8081"
    optional: true

# Wait for app to load
- extendedWaitUntil:
    visible: "Time Tracker"
    timeout: 30000

# If already logged in, logout first
- tapOn:
    id: "logout-button"
    optional: true

# Wait for login screen
- extendedWaitUntil:
    visible: "Sign in to continue"
    timeout: 10000

# Verify forgot password button is visible
- assertVisible:
    id: "forgot-password-button"

# Navigate to forgot password screen
- tapOn:
    id: "forgot-password-button"

# Verify forgot password screen elements
- extendedWaitUntil:
    visible: "Reset Password"
    timeout: 5000
- assertVisible: "Enter your email to receive a reset link"
- assertVisible:
    id: "reset-email-input"
- assertVisible:
    id: "reset-button"
- assertVisible:
    id: "back-to-login-button"

# Enter email and submit
- tapOn:
    id: "reset-email-input"
- inputText: "test@example.com"

- tapOn:
    id: "reset-button"

# Dismiss the alert (either success or error)
- tapOn:
    text: "OK"
    optional: true

# Verify we can navigate back to login
- tapOn:
    id: "back-to-login-button"
    optional: true

# Verify login screen is visible again
- extendedWaitUntil:
    visible: "Sign in to continue"
    timeout: 5000
